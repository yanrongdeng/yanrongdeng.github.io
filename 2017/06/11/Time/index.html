<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Js获取当前日期时间及其它操作 | 小燕子的窝</title><meta name="keywords" content="js"><meta name="author" content="yanrongdeng"><meta name="copyright" content="yanrongdeng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="获取时间de方法var myDate &#x3D; new Date();myDate.getYear();        &#x2F;&#x2F;获取当前年份(2位)myDate.getFullYear();    &#x2F;&#x2F;获取完整的年份(4位,1970-????)myDate.getMonth();       &#x2F;&#x2F;获取当前月份(0-11,0代表1月)myDate.getDate();        &#x2F;&#x2F;获取当前日(1-31)">
<meta property="og:type" content="article">
<meta property="og:title" content="Js获取当前日期时间及其它操作">
<meta property="og:url" content="http://example.com/2017/06/11/Time/index.html">
<meta property="og:site_name" content="小燕子的窝">
<meta property="og:description" content="获取时间de方法var myDate &#x3D; new Date();myDate.getYear();        &#x2F;&#x2F;获取当前年份(2位)myDate.getFullYear();    &#x2F;&#x2F;获取完整的年份(4位,1970-????)myDate.getMonth();       &#x2F;&#x2F;获取当前月份(0-11,0代表1月)myDate.getDate();        &#x2F;&#x2F;获取当前日(1-31)">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2017-06-11T10:18:16.000Z">
<meta property="article:modified_time" content="2021-09-26T05:21:33.508Z">
<meta property="article:author" content="yanrongdeng">
<meta property="article:tag" content="js">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2017/06/11/Time/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: '',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Js获取当前日期时间及其它操作',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-09-26 13:21:33'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归纳</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小燕子的窝</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归纳</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Js获取当前日期时间及其它操作</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2017-06-11T10:18:16.000Z" title="发表于 2017-06-11 18:18:16">2017-06-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-09-26T05:21:33.508Z" title="更新于 2021-09-26 13:21:33">2021-09-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B0%8F%E7%9F%A5%E8%AF%86/">小知识</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Js获取当前日期时间及其它操作"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="获取时间de方法"><a href="#获取时间de方法" class="headerlink" title="获取时间de方法"></a>获取时间de方法</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">myDate.getYear();        <span class="comment">//获取当前年份(2位)</span></span><br><span class="line">myDate.getFullYear();    <span class="comment">//获取完整的年份(4位,1970-????)</span></span><br><span class="line">myDate.getMonth();       <span class="comment">//获取当前月份(0-11,0代表1月)</span></span><br><span class="line">myDate.getDate();        <span class="comment">//获取当前日(1-31)</span></span><br><span class="line">myDate.getDay();         <span class="comment">//获取当前星期X(0-6,0代表星期天)</span></span><br><span class="line">myDate.getTime();        <span class="comment">//获取当前时间(从1970.1.1开始的毫秒数)</span></span><br><span class="line">myDate.getHours();       <span class="comment">//获取当前小时数(0-23)</span></span><br><span class="line">myDate.getMinutes();     <span class="comment">//获取当前分钟数(0-59)</span></span><br><span class="line">myDate.getSeconds();     <span class="comment">//获取当前秒数(0-59)</span></span><br><span class="line">myDate.getMilliseconds();       <span class="comment">//获取当前毫秒数(0-999)</span></span><br><span class="line">myDate.toLocaleDateString();    <span class="comment">//获取当前日期(2021/8/12)</span></span><br><span class="line">myDate.toLocaleTimeString();    <span class="comment">//获取当前时间(下午1:10:14)</span></span><br><span class="line">myDate.toLocaleString( );       <span class="comment">//获取日期与时间(2021/8/12下午1:10:14)</span></span><br></pre></td></tr></table></figure>
<h1 id="日期时间脚本库方法列表"><a href="#日期时间脚本库方法列表" class="headerlink" title="日期时间脚本库方法列表"></a>日期时间脚本库方法列表</h1><h2 id="isLeapYear-判断闰年"><a href="#isLeapYear-判断闰年" class="headerlink" title="isLeapYear 判断闰年"></a>isLeapYear 判断闰年</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.isLeapYear = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">return</span> (<span class="number">0</span>==<span class="built_in">this</span>.getYear()%<span class="number">4</span>&amp;&amp;((<span class="built_in">this</span>.getYear()%<span class="number">100</span>!=<span class="number">0</span>)||(<span class="built_in">this</span>.getYear()%<span class="number">400</span>==<span class="number">0</span>)));   </span><br><span class="line">&#125;   </span><br><span class="line">myDate.isLeapYear() <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h2 id="Format-日期格式化"><a href="#Format-日期格式化" class="headerlink" title="Format 日期格式化"></a>Format 日期格式化</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 说明：YYYY/yyyy/YY/yy 表示年份  MM/M 月份  W/w 星期  dd/DD/d/D 日期 hh/HH/h/H 时间  mm/m 分钟  ss/SS/s/S 秒  </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>formatStr 日期格式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">Date</span>.prototype.Format = <span class="function"><span class="keyword">function</span>(<span class="params">formatStr</span>)   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> str = formatStr;   </span><br><span class="line">    <span class="keyword">var</span> Week = [<span class="string">&#x27;日&#x27;</span>,<span class="string">&#x27;一&#x27;</span>,<span class="string">&#x27;二&#x27;</span>,<span class="string">&#x27;三&#x27;</span>,<span class="string">&#x27;四&#x27;</span>,<span class="string">&#x27;五&#x27;</span>,<span class="string">&#x27;六&#x27;</span>];  </span><br><span class="line">  </span><br><span class="line">    str=str.replace(<span class="regexp">/yyyy|YYYY/</span>,<span class="built_in">this</span>.getFullYear());   </span><br><span class="line">    str=str.replace(<span class="regexp">/yy|YY/</span>,(<span class="built_in">this</span>.getYear() % <span class="number">100</span>)&gt;<span class="number">9</span>?(<span class="built_in">this</span>.getYear() % <span class="number">100</span>).toString():<span class="string">&#x27;0&#x27;</span> + (<span class="built_in">this</span>.getYear() % <span class="number">100</span>));   </span><br><span class="line">  </span><br><span class="line">    str=str.replace(<span class="regexp">/MM/</span>,<span class="built_in">this</span>.getMonth()+<span class="number">1</span>&gt;<span class="number">9</span>?(<span class="built_in">this</span>.getMonth()+<span class="number">1</span>).toString():<span class="string">&#x27;0&#x27;</span> + (<span class="built_in">this</span>.getMonth()+<span class="number">1</span>));   </span><br><span class="line">    str=str.replace(<span class="regexp">/M/g</span>,<span class="built_in">this</span>.getMonth()+<span class="number">1</span>);   </span><br><span class="line">  </span><br><span class="line">    str=str.replace(<span class="regexp">/w|W/g</span>,Week[<span class="built_in">this</span>.getDay()]);   </span><br><span class="line">  </span><br><span class="line">    str=str.replace(<span class="regexp">/dd|DD/</span>,<span class="built_in">this</span>.getDate()&gt;<span class="number">9</span>?<span class="built_in">this</span>.getDate().toString():<span class="string">&#x27;0&#x27;</span> + <span class="built_in">this</span>.getDate());   </span><br><span class="line">    str=str.replace(<span class="regexp">/d|D/g</span>,<span class="built_in">this</span>.getDate());   </span><br><span class="line">  </span><br><span class="line">    str=str.replace(<span class="regexp">/hh|HH/</span>,<span class="built_in">this</span>.getHours()&gt;<span class="number">9</span>?<span class="built_in">this</span>.getHours().toString():<span class="string">&#x27;0&#x27;</span> + <span class="built_in">this</span>.getHours());   </span><br><span class="line">    str=str.replace(<span class="regexp">/h|H/g</span>,<span class="built_in">this</span>.getHours()); </span><br><span class="line"></span><br><span class="line">    str=str.replace(<span class="regexp">/mm/</span>,<span class="built_in">this</span>.getMinutes()&gt;<span class="number">9</span>?<span class="built_in">this</span>.getMinutes().toString():<span class="string">&#x27;0&#x27;</span> + <span class="built_in">this</span>.getMinutes());   </span><br><span class="line">    str=str.replace(<span class="regexp">/m/g</span>,<span class="built_in">this</span>.getMinutes());   </span><br><span class="line">  </span><br><span class="line">    str=str.replace(<span class="regexp">/ss|SS/</span>,<span class="built_in">this</span>.getSeconds()&gt;<span class="number">9</span>?<span class="built_in">this</span>.getSeconds().toString():<span class="string">&#x27;0&#x27;</span> + <span class="built_in">this</span>.getSeconds());   </span><br><span class="line">    str=str.replace(<span class="regexp">/s|S/g</span>,<span class="built_in">this</span>.getSeconds());   </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> str;   </span><br><span class="line">&#125;</span><br><span class="line">myDate.Format(<span class="string">&quot;YYYY/MM/dd HH:mm:SS&quot;</span>)    <span class="comment">//&quot;2021/08/12 14:17:31&quot;</span></span><br><span class="line">myDate.Format(<span class="string">&quot;MM-dd-YYYY HH:mm:SS&quot;</span>)    <span class="comment">//&quot;08-12-2021 14:17:31&quot;</span></span><br><span class="line">myDate.Format(<span class="string">&quot;MM/dd/YYYY HH:mm:SS&quot;</span>)    <span class="comment">//&quot;08/12/2021 14:17:31&quot;</span></span><br><span class="line">myDate.Format(<span class="string">&quot;MM-dd-YYYY&quot;</span>)     <span class="comment">//&quot;08-12-2021&quot;</span></span><br><span class="line">myDate.Format(<span class="string">&quot;MM-dd&quot;</span>)          <span class="comment">//&quot;08-12&quot;</span></span><br><span class="line">myDate.Format(<span class="string">&quot;M-d&quot;</span>)            <span class="comment">//&quot;8-12&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="format-日期格式化-yyyy-MM-dd-hh-mm-ss-S"><a href="#format-日期格式化-yyyy-MM-dd-hh-mm-ss-S" class="headerlink" title="format 日期格式化(yyyy-MM-dd hh:mm:ss.S)"></a>format 日期格式化(yyyy-MM-dd hh:mm:ss.S)</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 说明：月(M)、日(d)、小时(H)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>fmt 日期格式  &quot;yyyy-MM-dd hh:mm:ss.S&quot;  &quot;yyyy-M-d h:m:s.S&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span>(<span class="params">fmt</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">var</span> o = &#123;</span><br><span class="line">        <span class="string">&quot;M+&quot;</span>: <span class="built_in">this</span>.getMonth() + <span class="number">1</span>, <span class="comment">//月份</span></span><br><span class="line">        <span class="string">&quot;d+&quot;</span>: <span class="built_in">this</span>.getDate(), <span class="comment">//日</span></span><br><span class="line">        <span class="string">&quot;h+&quot;</span>: <span class="built_in">this</span>.getHours(), <span class="comment">//小时</span></span><br><span class="line">        <span class="string">&quot;m+&quot;</span>: <span class="built_in">this</span>.getMinutes(), <span class="comment">//分</span></span><br><span class="line">        <span class="string">&quot;s+&quot;</span>: <span class="built_in">this</span>.getSeconds(), <span class="comment">//秒</span></span><br><span class="line">        <span class="string">&quot;q+&quot;</span>: <span class="built_in">Math</span>.floor((<span class="built_in">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度</span></span><br><span class="line">        <span class="string">&quot;S&quot;</span>: <span class="built_in">this</span>.getMilliseconds() <span class="comment">//毫秒</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt))</span><br><span class="line">        fmt = fmt.replace(<span class="built_in">RegExp</span>.$1, (<span class="built_in">this</span>.getFullYear() + <span class="string">&quot;&quot;</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$1.length));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;(&quot;</span> + k + <span class="string">&quot;)&quot;</span>).test(fmt))</span><br><span class="line">            fmt = fmt.replace(<span class="built_in">RegExp</span>.$1, (<span class="built_in">RegExp</span>.$1.length == <span class="number">1</span>) ? (o[k]) : ((<span class="string">&quot;00&quot;</span> + o[k]).substr((<span class="string">&quot;&quot;</span> + o[k]).length)));</span><br><span class="line">    <span class="keyword">return</span> fmt;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h2 id="DateAdd-日期计算"><a href="#DateAdd-日期计算" class="headerlink" title="DateAdd 日期计算"></a>DateAdd 日期计算</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.DateAdd = <span class="function"><span class="keyword">function</span>(<span class="params">strInterval, <span class="built_in">Number</span></span>) </span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> dtTmp = <span class="built_in">this</span>;  </span><br><span class="line">    <span class="keyword">switch</span> (strInterval) &#123;   </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(dtTmp) + (<span class="number">1000</span> * <span class="built_in">Number</span>));  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(dtTmp) + (<span class="number">60000</span> * <span class="built_in">Number</span>));  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;h&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(dtTmp) + (<span class="number">3600000</span> * <span class="built_in">Number</span>));  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(dtTmp) + (<span class="number">86400000</span> * <span class="built_in">Number</span>));  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(dtTmp) + ((<span class="number">86400000</span> * <span class="number">7</span>) * <span class="built_in">Number</span>));  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;q&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(dtTmp.getFullYear(), (dtTmp.getMonth()) + <span class="built_in">Number</span>*<span class="number">3</span>, dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;m&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(dtTmp.getFullYear(), (dtTmp.getMonth()) + <span class="built_in">Number</span>, dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;y&#x27;</span> :<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>((dtTmp.getFullYear() + <span class="built_in">Number</span>), dtTmp.getMonth(), dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h2 id="DateDiff-比较日期差"><a href="#DateDiff-比较日期差" class="headerlink" title="DateDiff 比较日期差"></a>DateDiff 比较日期差</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//| 比较日期差 dtEnd 格式为日期型或者有效日期格式字符串  </span></span><br><span class="line"><span class="built_in">Date</span>.prototype.DateDiff = <span class="function"><span class="keyword">function</span>(<span class="params">strInterval, dtEnd</span>) </span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> dtStart = <span class="built_in">this</span>;  </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> dtEnd == <span class="string">&#x27;string&#x27;</span> )<span class="comment">//如果是字符串转换为日期型  </span></span><br><span class="line">    &#123;   </span><br><span class="line">        dtEnd = getStringToTime(dtEnd);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">switch</span> (strInterval) &#123;   </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span> :<span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">1000</span>);  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span> :<span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">60000</span>);  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;h&#x27;</span> :<span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">3600000</span>);  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span> :<span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">86400000</span>);  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span> :<span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / (<span class="number">86400000</span> * <span class="number">7</span>));  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;m&#x27;</span> :<span class="keyword">return</span> (dtEnd.getMonth()+<span class="number">1</span>)+((dtEnd.getFullYear()-dtStart.getFullYear())*<span class="number">12</span>) - (dtStart.getMonth()+<span class="number">1</span>);  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;y&#x27;</span> :<span class="keyword">return</span> dtEnd.getFullYear() - dtStart.getFullYear();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h2 id="toString-日期转字符串"><a href="#toString-日期转字符串" class="headerlink" title="toString 日期转字符串"></a>toString 日期转字符串</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//| 日期输出字符串，重载了系统的toString方法  </span></span><br><span class="line"><span class="built_in">Date</span>.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params">showWeek</span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> myDate= <span class="built_in">this</span>;  </span><br><span class="line">    <span class="keyword">var</span> str = myDate.toLocaleDateString();  </span><br><span class="line">    <span class="keyword">if</span> (showWeek)  </span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="keyword">var</span> Week = [<span class="string">&#x27;日&#x27;</span>,<span class="string">&#x27;一&#x27;</span>,<span class="string">&#x27;二&#x27;</span>,<span class="string">&#x27;三&#x27;</span>,<span class="string">&#x27;四&#x27;</span>,<span class="string">&#x27;五&#x27;</span>,<span class="string">&#x27;六&#x27;</span>];  </span><br><span class="line">        str += <span class="string">&#x27; 星期&#x27;</span> + Week[myDate.getDay()];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> str;  </span><br><span class="line">&#125;  </span><br><span class="line">myDate.toString()       <span class="comment">// &quot;2021/8/12&quot;</span></span><br><span class="line">myDate.toString(<span class="literal">true</span>)   <span class="comment">// &quot;2021/8/12 星期四&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="toArray-日期分割为数组"><a href="#toArray-日期分割为数组" class="headerlink" title="toArray 日期分割为数组"></a>toArray 日期分割为数组</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.toArray = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> myDate = <span class="built_in">this</span>;  </span><br><span class="line">    <span class="keyword">var</span> myArray = <span class="built_in">Array</span>();  </span><br><span class="line">    myArray[<span class="number">0</span>] = myDate.getFullYear();  </span><br><span class="line">    myArray[<span class="number">1</span>] = myDate.getMonth();  </span><br><span class="line">    myArray[<span class="number">2</span>] = myDate.getDate();  </span><br><span class="line">    myArray[<span class="number">3</span>] = myDate.getHours();  </span><br><span class="line">    myArray[<span class="number">4</span>] = myDate.getMinutes();  </span><br><span class="line">    myArray[<span class="number">5</span>] = myDate.getSeconds();  </span><br><span class="line">    <span class="keyword">return</span> myArray;  </span><br><span class="line">&#125;  </span><br><span class="line">myDate.toArray() <span class="comment">//  [2021, 7, 12, 14, 36, 31]</span></span><br></pre></td></tr></table></figure>
<h2 id="DatePart-取日期的部分信息"><a href="#DatePart-取日期的部分信息" class="headerlink" title="DatePart 取日期的部分信息"></a>DatePart 取日期的部分信息</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//| 取得日期数据信息  </span></span><br><span class="line"><span class="comment">//| 参数 interval 表示数据类型  </span></span><br><span class="line"><span class="comment">//| y 年 m月 d日 w星期 ww周 h时 n分 s秒  </span></span><br><span class="line"><span class="built_in">Date</span>.prototype.DatePart = <span class="function"><span class="keyword">function</span>(<span class="params">interval</span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> myDate = <span class="built_in">this</span>;  </span><br><span class="line">    <span class="keyword">var</span> partStr=<span class="string">&#x27;&#x27;</span>;  </span><br><span class="line">    <span class="keyword">var</span> Week = [<span class="string">&#x27;日&#x27;</span>,<span class="string">&#x27;一&#x27;</span>,<span class="string">&#x27;二&#x27;</span>,<span class="string">&#x27;三&#x27;</span>,<span class="string">&#x27;四&#x27;</span>,<span class="string">&#x27;五&#x27;</span>,<span class="string">&#x27;六&#x27;</span>];  </span><br><span class="line">    <span class="keyword">switch</span> (interval)  </span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;y&#x27;</span> :partStr = myDate.getFullYear();<span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;m&#x27;</span> :partStr = myDate.getMonth()+<span class="number">1</span>;<span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span> :partStr = myDate.getDate();<span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span> :partStr = Week[myDate.getDay()];<span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;ww&#x27;</span> :partStr = myDate.WeekNumOfYear();<span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;h&#x27;</span> :partStr = myDate.getHours();<span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span> :partStr = myDate.getMinutes();<span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span> :partStr = myDate.getSeconds();<span class="keyword">break</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> partStr;  </span><br><span class="line">&#125;  </span><br><span class="line">myDate.DatePart(<span class="string">&#x27;y&#x27;</span>)  <span class="comment">//2021</span></span><br><span class="line">myDate.DatePart(<span class="string">&#x27;w&#x27;</span>) <span class="comment">//&quot;四&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="MaxDayOfDate-取日期所在月的最大天数"><a href="#MaxDayOfDate-取日期所在月的最大天数" class="headerlink" title="MaxDayOfDate 取日期所在月的最大天数"></a>MaxDayOfDate 取日期所在月的最大天数</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.MaxDayOfDate = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> myDate = <span class="built_in">this</span>;  </span><br><span class="line">    <span class="keyword">var</span> ary = myDate.toArray();  </span><br><span class="line">    <span class="keyword">var</span> date1 = (<span class="keyword">new</span> <span class="built_in">Date</span>(ary[<span class="number">0</span>],ary[<span class="number">1</span>]+<span class="number">1</span>,<span class="number">1</span>));  </span><br><span class="line">    <span class="keyword">var</span> date2 = date1.dateAdd(<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>,<span class="number">1</span>);  </span><br><span class="line">    <span class="keyword">var</span> result = dateDiff(date1.Format(<span class="string">&#x27;yyyy-MM-dd&#x27;</span>),date2.Format(<span class="string">&#x27;yyyy-MM-dd&#x27;</span>));  </span><br><span class="line">    <span class="keyword">return</span> result;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h2 id="WeekNumOfYear-判断日期所在年的第几周"><a href="#WeekNumOfYear-判断日期所在年的第几周" class="headerlink" title="WeekNumOfYear 判断日期所在年的第几周"></a>WeekNumOfYear 判断日期所在年的第几周</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.WeekNumOfYear = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> myDate = <span class="built_in">this</span>;  </span><br><span class="line">    <span class="keyword">var</span> ary = myDate.toArray();  </span><br><span class="line">    <span class="keyword">var</span> year = ary[<span class="number">0</span>];  </span><br><span class="line">    <span class="keyword">var</span> month = ary[<span class="number">1</span>]+<span class="number">1</span>;  </span><br><span class="line">    <span class="keyword">var</span> day = ary[<span class="number">2</span>];  </span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">&#x27;&lt; script language=VBScript\&gt; \n&#x27;</span>);  </span><br><span class="line">    <span class="comment">// document.write(&#x27;myDate = Datue(&#x27;&#x27;+month+&#x27;-&#x27;+day+&#x27;-&#x27;+year+&#x27;&#x27;) \n&#x27;);  </span></span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">&#x27;result = DatePart(&#x27;</span>ww<span class="string">&#x27;, myDate) \n&#x27;</span>);  </span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">&#x27; \n&#x27;</span>);  </span><br><span class="line">    <span class="keyword">return</span> result;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h1 id="IsValidDate-验证日期有效性"><a href="#IsValidDate-验证日期有效性" class="headerlink" title="IsValidDate 验证日期有效性"></a>IsValidDate 验证日期有效性</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//| 日期合法性验证  </span></span><br><span class="line"><span class="comment">//| 格式为：YYYY-MM-DD或YYYY/MM/DD  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsValidDate</span>(<span class="params">DateStr</span>)   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> sDate=DateStr.replace(<span class="regexp">/(^\s+|\s+$)/g</span>,<span class="string">&#x27;&#x27;</span>); <span class="comment">//去两边空格;   </span></span><br><span class="line">    <span class="keyword">if</span>(sDate==<span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> <span class="literal">true</span>;   </span><br><span class="line">    <span class="comment">//如果格式满足YYYY-(/)MM-(/)DD或YYYY-(/)M-(/)DD或YYYY-(/)M-(/)D或YYYY-(/)MM-(/)D就替换为&#x27;&#x27;   </span></span><br><span class="line">    <span class="comment">//数据库中，合法日期可以是:YYYY-MM/DD(2003-3/21),数据库会自动转换为YYYY-MM-DD格式   </span></span><br><span class="line">    <span class="keyword">var</span> s = sDate.replace(<span class="regexp">/[\d]&#123; 4,4 &#125;[\-/]&#123; 1 &#125;[\d]&#123; 1,2 &#125;[\-/]&#123; 1 &#125;[\d]&#123; 1,2 &#125;/g</span>,<span class="string">&#x27;&#x27;</span>);   </span><br><span class="line">    <span class="keyword">if</span> (s==<span class="string">&#x27;&#x27;</span>) <span class="comment">//说明格式满足YYYY-MM-DD或YYYY-M-DD或YYYY-M-D或YYYY-MM-D   </span></span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="keyword">var</span> t=<span class="keyword">new</span> <span class="built_in">Date</span>(sDate.replace(<span class="regexp">/\-/g</span>,<span class="string">&#x27;/&#x27;</span>));   </span><br><span class="line">        <span class="keyword">var</span> ar = sDate.split(<span class="regexp">/[-/:]/</span>);   </span><br><span class="line">        <span class="keyword">if</span>(ar[<span class="number">0</span>] != t.getYear() || ar[<span class="number">1</span>] != t.getMonth()+<span class="number">1</span> || ar[<span class="number">2</span>] != t.getDate())   </span><br><span class="line">        &#123;   </span><br><span class="line">            <span class="comment">//alert(&#x27;错误的日期格式！格式为：YYYY-MM-DD或YYYY/MM/DD。注意闰年。&#x27;);   </span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">else</span>   </span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="comment">//alert(&#x27;错误的日期格式！格式为：YYYY-MM-DD或YYYY/MM/DD。注意闰年。&#x27;);   </span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;   </span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<h1 id="CheckDateTime-完整日期时间检查"><a href="#CheckDateTime-完整日期时间检查" class="headerlink" title="CheckDateTime 完整日期时间检查"></a>CheckDateTime 完整日期时间检查</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//| 日期时间检查  </span></span><br><span class="line"><span class="comment">//| 格式为：YYYY-MM-DD HH:MM:SS  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CheckDateTime</span>(<span class="params">str</span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/^(\d+)-(\d&#123; 1,2 &#125;)-(\d&#123; 1,2 &#125;) (\d&#123; 1,2 &#125;):(\d&#123; 1,2 &#125;):(\d&#123; 1,2 &#125;)$/</span>;   </span><br><span class="line">    <span class="keyword">var</span> r = str.match(reg);   </span><br><span class="line">    <span class="keyword">if</span>(r==<span class="literal">null</span>)<span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    r[<span class="number">2</span>]=r[<span class="number">2</span>]-<span class="number">1</span>;   </span><br><span class="line">    <span class="keyword">var</span> d= <span class="keyword">new</span> <span class="built_in">Date</span>(r[<span class="number">1</span>],r[<span class="number">2</span>],r[<span class="number">3</span>],r[<span class="number">4</span>],r[<span class="number">5</span>],r[<span class="number">6</span>]);   </span><br><span class="line">    <span class="keyword">if</span>(d.getFullYear()!=r[<span class="number">1</span>])<span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    <span class="keyword">if</span>(d.getMonth()!=r[<span class="number">2</span>])<span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    <span class="keyword">if</span>(d.getDate()!=r[<span class="number">3</span>])<span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    <span class="keyword">if</span>(d.getHours()!=r[<span class="number">4</span>])<span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    <span class="keyword">if</span>(d.getMinutes()!=r[<span class="number">5</span>])<span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    <span class="keyword">if</span>(d.getSeconds()!=r[<span class="number">6</span>])<span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;   </span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<h1 id="daysBetween-日期天数差"><a href="#daysBetween-日期天数差" class="headerlink" title="daysBetween 日期天数差"></a>daysBetween 日期天数差</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//| 求两个时间的天数差 日期格式为 YYYY-MM-dd   </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">daysBetween</span>(<span class="params">DateOne,DateTwo</span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="keyword">var</span> OneMonth = DateOne.substring(<span class="number">5</span>,DateOne.lastIndexOf (<span class="string">&#x27;-&#x27;</span>));  </span><br><span class="line">    <span class="keyword">var</span> OneDay = DateOne.substring(DateOne.length,DateOne.lastIndexOf (<span class="string">&#x27;-&#x27;</span>)+<span class="number">1</span>);  </span><br><span class="line">    <span class="keyword">var</span> OneYear = DateOne.substring(<span class="number">0</span>,DateOne.indexOf (<span class="string">&#x27;-&#x27;</span>));  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> TwoMonth = DateTwo.substring(<span class="number">5</span>,DateTwo.lastIndexOf (<span class="string">&#x27;-&#x27;</span>));  </span><br><span class="line">    <span class="keyword">var</span> TwoDay = DateTwo.substring(DateTwo.length,DateTwo.lastIndexOf (<span class="string">&#x27;-&#x27;</span>)+<span class="number">1</span>);  </span><br><span class="line">    <span class="keyword">var</span> TwoYear = DateTwo.substring(<span class="number">0</span>,DateTwo.indexOf (<span class="string">&#x27;-&#x27;</span>));  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> cha=((<span class="built_in">Date</span>.parse(OneMonth+<span class="string">&#x27;/&#x27;</span>+OneDay+<span class="string">&#x27;/&#x27;</span>+OneYear)- <span class="built_in">Date</span>.parse(TwoMonth+<span class="string">&#x27;/&#x27;</span>+TwoDay+<span class="string">&#x27;/&#x27;</span>+TwoYear))/<span class="number">86400000</span>);   </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.abs(cha);  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h1 id="getStringDate-获取字符串日期"><a href="#getStringDate-获取字符串日期" class="headerlink" title="getStringDate 获取字符串日期"></a>getStringDate 获取字符串日期</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStringDate</span>(<span class="params"> time , format=<span class="string">&quot;yyyy.MM.dd&quot;</span> </span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 对time进行正则判断</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/^[0-9]&#123;14,15&#125;$/</span>.test(time))&#123; </span><br><span class="line">        <span class="comment">//&quot;yyyyMMddhhmmss&quot;</span></span><br><span class="line">        time = <span class="string">`<span class="subst">$&#123;time.substring(<span class="number">0</span>, <span class="number">4</span>)&#125;</span>/<span class="subst">$&#123;time.substring(<span class="number">4</span>, <span class="number">6</span>)&#125;</span>/<span class="subst">$&#123;time.substring(<span class="number">6</span>, <span class="number">8</span>)&#125;</span> <span class="subst">$&#123;time.substring(<span class="number">8</span>, <span class="number">10</span>)&#125;</span>:<span class="subst">$&#123;time.substring(<span class="number">10</span>,<span class="number">12</span>)&#125;</span>:<span class="subst">$&#123;time.substring(<span class="number">12</span>, <span class="number">14</span>)&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/^\d&#123;8&#125;$/</span>.test(time))&#123;  </span><br><span class="line">        <span class="comment">// &quot;yyyyMMdd&quot;</span></span><br><span class="line">        time = <span class="string">`<span class="subst">$&#123;time.substring(<span class="number">0</span>, <span class="number">4</span>)&#125;</span>/<span class="subst">$&#123;time.substring(<span class="number">4</span>, <span class="number">6</span>)&#125;</span>/<span class="subst">$&#123;time.substring(<span class="number">6</span>, <span class="number">8</span>)&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/^\d&#123;8&#125;\s&#123;1&#125;[0-9]&#123;2&#125;:[0-9]&#123;2&#125;:[0-9]&#123;2&#125;\.?[0-9]?$/</span>.test(time))&#123;  </span><br><span class="line">        <span class="comment">// &quot;yyyyMMdd hh:mm:ss&quot;</span></span><br><span class="line">        time = <span class="string">`<span class="subst">$&#123;time.substring(<span class="number">0</span>, <span class="number">4</span>)&#125;</span>/<span class="subst">$&#123;time.substring(<span class="number">4</span>, <span class="number">6</span>)&#125;</span>/<span class="subst">$&#123;time.substring(<span class="number">6</span>, <span class="number">8</span>)&#125;</span> <span class="subst">$&#123;time.split(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>]&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(time).Format(format);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取当前时间</span></span><br><span class="line">getStringDate(myDate,<span class="string">&quot;YYYY-MM-DD HH:mm:SS&quot;</span>); <span class="comment">// &quot;2021-08-13 14:50:26&quot;</span></span><br><span class="line">getStringDate(myDate,<span class="string">&quot;yyyyMMddhhmmss&quot;</span>) <span class="comment">// &quot;20210813145026&quot;</span></span><br><span class="line">getStringDate(myDate,<span class="string">&quot;yyyyMMdd hh:mm:ss&quot;</span>) <span class="comment">// &quot;20210813 14:50:26&quot;</span></span><br><span class="line"><span class="comment">//yyyyMMddhhmmss 字符串日期格式化</span></span><br><span class="line">getStringDate(<span class="string">&quot;20210812155004&quot;</span>,<span class="string">&quot;yyyy-MM-dd hh:mm:ss.S&quot;</span>) <span class="comment">//&quot;2021-08-12 15:50:04.0&quot;</span></span><br><span class="line">getStringDate(<span class="string">&quot;20210812155004&quot;</span>) <span class="comment">// &quot;2021.08.12&quot;</span></span><br><span class="line"><span class="comment">//yyyyMMdd hh:mm:ss 字符串日期格式化</span></span><br><span class="line">getStringDate(<span class="string">&quot;20210813 14:50:26&quot;</span>,<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>) <span class="comment">// &quot;2021-08-13 14:50:26&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="getStringToTime-获取中国标准时间-日期"><a href="#getStringToTime-获取中国标准时间-日期" class="headerlink" title="getStringToTime 获取中国标准时间(日期)"></a>getStringToTime 获取中国标准时间(日期)</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//DateStr 格式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStringToTime</span>(<span class="params">DateStr</span>)  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    DateStr = <span class="built_in">this</span>.getStringDate(DateStr,<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> converted = <span class="built_in">Date</span>.parse(DateStr);  </span><br><span class="line">    <span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="built_in">Date</span>(converted);  </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(myDate))  </span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="comment">//var delimCahar = DateStr.indexOf(&#x27;/&#x27;)!=-1?&#x27;/&#x27;:&#x27;-&#x27;;  </span></span><br><span class="line">        <span class="keyword">var</span> arys= DateStr.split(<span class="string">&#x27;-&#x27;</span>);  </span><br><span class="line">        myDate = <span class="keyword">new</span> <span class="built_in">Date</span>(arys[<span class="number">0</span>],--arys[<span class="number">1</span>],arys[<span class="number">2</span>]);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> myDate;  </span><br><span class="line">&#125;  </span><br><span class="line">getStringToTime(<span class="string">&quot;2021-08-12 14:07&quot;</span>) <span class="comment">// Thu Aug 12 2021 14:07:00 GMT+0800 (中国标准时间)</span></span><br><span class="line">getStringToTime(<span class="string">&quot;2021/08/12 14:07&quot;</span>) <span class="comment">// Thu Aug 12 2021 14:07:00 GMT+0800 (中国标准时间)</span></span><br><span class="line">getStringToTime(<span class="string">&quot;08/12/2020 14:07&quot;</span>) <span class="comment">// Wed Aug 12 2020 14:07:00 GMT+0800 (中国标准时间)</span></span><br><span class="line">getStringToTime(<span class="string">&quot;08-12-2020 14:07&quot;</span>) <span class="comment">// Wed Aug 12 2020 14:07:00 GMT+0800 (中国标准时间)</span></span><br><span class="line">getStringToTime(<span class="string">&quot;08-12-2020&quot;</span>)       <span class="comment">// Wed Aug 12 2020 00:00:00 GMT+0800 (中国标准时间)</span></span><br></pre></td></tr></table></figure>
<h1 id="getTimeStamp-获取时间戳"><a href="#getTimeStamp-获取时间戳" class="headerlink" title="getTimeStamp 获取时间戳"></a>getTimeStamp 获取时间戳</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>dateStr 多类型</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTimeStamp</span>(<span class="params">dateStr</span>) </span>&#123;</span><br><span class="line">    dateStr = <span class="built_in">this</span>.getStringDate(dateStr,<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> arr = dateStr.split(<span class="regexp">/[- :]/</span>);</span><br><span class="line">    <span class="keyword">let</span> nndate = <span class="keyword">new</span> <span class="built_in">Date</span>(arr[<span class="number">0</span>], arr[<span class="number">1</span>] - <span class="number">1</span>, arr[<span class="number">2</span>], arr[<span class="number">3</span>], arr[<span class="number">4</span>], arr[<span class="number">5</span>]);</span><br><span class="line">    nndate = <span class="built_in">Date</span>.parse(nndate);</span><br><span class="line">    <span class="keyword">return</span> nndate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="getDayWeek-获取“周几”"><a href="#getDayWeek-获取“周几”" class="headerlink" title="getDayWeek 获取“周几”"></a>getDayWeek 获取“周几”</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>date 多类型</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDayWeek</span>(<span class="params">date</span>) </span>&#123;</span><br><span class="line">    date = <span class="built_in">this</span>.getStringDate(date,<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> weekDay = [<span class="string">&quot;星期日&quot;</span>, <span class="string">&quot;星期一&quot;</span>, <span class="string">&quot;星期二&quot;</span>, <span class="string">&quot;星期三&quot;</span>, <span class="string">&quot;星期四&quot;</span>, <span class="string">&quot;星期五&quot;</span>, <span class="string">&quot;星期六&quot;</span>];</span><br><span class="line">    <span class="keyword">let</span> newDate = date.replace(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> week = weekDay[<span class="keyword">new</span> <span class="built_in">Date</span>(newDate).getDay()];</span><br><span class="line">    <span class="keyword">return</span> week;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="getFormatSeconds-获取时、分、秒"><a href="#getFormatSeconds-获取时、分、秒" class="headerlink" title="getFormatSeconds 获取时、分、秒"></a>getFormatSeconds 获取时、分、秒</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">functin <span class="function"><span class="title">getFormatSeconds</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> secondTime = <span class="built_in">parseInt</span>(value); <span class="comment">// 秒</span></span><br><span class="line">    <span class="keyword">var</span> minuteTime = <span class="number">0</span>; <span class="comment">// 分</span></span><br><span class="line">    <span class="keyword">var</span> hourTime = <span class="number">0</span>; <span class="comment">// 小时</span></span><br><span class="line">    <span class="keyword">if</span> (secondTime &gt; <span class="number">60</span>) &#123; <span class="comment">//如果秒数大于60，将秒数转换成整数</span></span><br><span class="line">        <span class="comment">//获取分钟，除以60取整数，得到整数分钟</span></span><br><span class="line">        minuteTime = <span class="built_in">parseInt</span>(secondTime / <span class="number">60</span>);</span><br><span class="line">        <span class="comment">//获取秒数，秒数取佘，得到整数秒数</span></span><br><span class="line">        secondTime = <span class="built_in">parseInt</span>(secondTime % <span class="number">60</span>);</span><br><span class="line">        <span class="comment">//如果分钟大于60，将分钟转换成小时</span></span><br><span class="line">        <span class="keyword">if</span> (minuteTime &gt; <span class="number">60</span>) &#123;</span><br><span class="line">            <span class="comment">//获取小时，获取分钟除以60，得到整数小时</span></span><br><span class="line">            hourTime = <span class="built_in">parseInt</span>(minuteTime / <span class="number">60</span>);</span><br><span class="line">            <span class="comment">//获取小时后取佘的分，获取分钟除以60取佘的分</span></span><br><span class="line">            minuteTime = <span class="built_in">parseInt</span>(minuteTime % <span class="number">60</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">&quot;&quot;</span> + <span class="built_in">parseInt</span>(secondTime) + <span class="string">&quot;秒&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (minuteTime &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        result = <span class="string">&quot;&quot;</span> + <span class="built_in">parseInt</span>(minuteTime) + <span class="string">&quot;分&quot;</span> + result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hourTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        result = <span class="string">&quot;&quot;</span> + <span class="built_in">parseInt</span>(hourTime) + <span class="string">&quot;时&quot;</span> + result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="getDay-获取天数"><a href="#getDay-获取天数" class="headerlink" title="getDay 获取天数"></a>getDay 获取天数</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;Date&#125;</span> </span>itemDay 目标时间 </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;Date&#125;</span> </span>today 今天时间</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return </span>判断今天、明天、后天、周几</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDay</span>(<span class="params">itemDay = <span class="keyword">new</span> <span class="built_in">Date</span>(), today = <span class="keyword">new</span> <span class="built_in">Date</span>()</span>) </span>&#123;</span><br><span class="line">    today = <span class="keyword">new</span> <span class="built_in">Date</span>(today.format(<span class="string">&quot;yyyy-MM-dd&quot;</span>));</span><br><span class="line">    <span class="keyword">const</span> everyDayTime = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>; <span class="comment">// 每天毫秒数</span></span><br><span class="line">    <span class="keyword">let</span> days = <span class="built_in">Math</span>.ceil((itemDay.getTime() - today.getTime()) / everyDayTime); <span class="comment">// 目标时间距离今天的天数</span></span><br><span class="line">    <span class="keyword">const</span> dayList = [<span class="string">&quot;周日&quot;</span>, <span class="string">&quot;周一&quot;</span>, <span class="string">&quot;周二&quot;</span>, <span class="string">&quot;周三&quot;</span>, <span class="string">&quot;周四&quot;</span>, <span class="string">&quot;周五&quot;</span>, <span class="string">&quot;周六&quot;</span>]; <span class="comment">// 对应周天数的map</span></span><br><span class="line">    days &lt; <span class="number">0</span> &amp;&amp; (days = <span class="number">0</span>); <span class="comment">// 目标天在今天之前的当做今天</span></span><br><span class="line">    <span class="keyword">let</span> preStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">switch</span> (days) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            preStr = <span class="string">&quot;今天&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            preStr = <span class="string">&quot;明天&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            preStr = <span class="string">&quot;后天&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            preStr = dayList[itemDay.getDay()];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> preStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="getDayDesc-获取明后天-本周下周"><a href="#getDayDesc-获取明后天-本周下周" class="headerlink" title="getDayDesc 获取明后天 本周下周"></a>getDayDesc 获取明后天 本周下周</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 获取明后天 本周下周</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;Date&#125;</span> <span class="variable">itemDay</span></span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;Date&#125;</span> <span class="variable">today</span></span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDayDesc</span>(<span class="params">itemDay = <span class="keyword">new</span> <span class="built_in">Date</span>(), today = <span class="keyword">new</span> <span class="built_in">Date</span>()</span>) </span>&#123;</span><br><span class="line">    today = <span class="keyword">new</span> <span class="built_in">Date</span>(today.format(<span class="string">&quot;yyyy/MM/dd&quot;</span>)); <span class="comment">// 今天的00:00国际标准时间  东八区按照08:00</span></span><br><span class="line">    itemDay = <span class="keyword">new</span> <span class="built_in">Date</span>(itemDay.format(<span class="string">&quot;yyyy/MM/dd&quot;</span>)); <span class="comment">// 目标天的00:00国际标准时间  东八区按照08:00</span></span><br><span class="line">    <span class="keyword">const</span> everyDayTime = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>; <span class="comment">// 每天毫秒数</span></span><br><span class="line">    <span class="keyword">let</span> days = <span class="built_in">Math</span>.ceil((itemDay.getTime() - today.getTime()) / everyDayTime); <span class="comment">// 目标时间距离今天的天数</span></span><br><span class="line">    <span class="keyword">const</span> todayWeekDay = today.getDay() || <span class="number">7</span>; <span class="comment">// 今天：每周第几天</span></span><br><span class="line">    <span class="keyword">let</span> itemWeekDay = itemDay.getDay() || <span class="number">7</span>; <span class="comment">// 目标天：每周第几天</span></span><br><span class="line">    <span class="keyword">const</span> surDay = <span class="number">7</span> - todayWeekDay; <span class="comment">// 本周剩余天数</span></span><br><span class="line">    <span class="keyword">const</span> dayList = [<span class="string">&quot;一&quot;</span>, <span class="string">&quot;二&quot;</span>, <span class="string">&quot;三&quot;</span>, <span class="string">&quot;四&quot;</span>, <span class="string">&quot;五&quot;</span>, <span class="string">&quot;六&quot;</span>, <span class="string">&quot;日&quot;</span>]; <span class="comment">// 对应周天数的map</span></span><br><span class="line">    <span class="keyword">let</span> preStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">switch</span> (days) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            preStr = <span class="string">&quot;今天 &quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            preStr = <span class="string">&quot;明天 &quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            preStr = <span class="string">&quot;后天 &quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            days &lt; <span class="number">0</span> &amp;&amp; (days = <span class="number">0</span>); <span class="comment">// 目标天在今天之前的当做今天</span></span><br><span class="line">            <span class="keyword">const</span> nextWeek = days - surDay; <span class="comment">// 距离今天的天数是否在本周</span></span><br><span class="line">            <span class="keyword">if</span> (todayWeekDay == <span class="number">7</span> &amp;&amp; days &lt;= <span class="number">7</span>) &#123;</span><br><span class="line">                <span class="comment">// 今天为本周最后一天 相差天数 &lt;=7</span></span><br><span class="line">                preStr = <span class="string">`周<span class="subst">$&#123;dayList[days - <span class="number">1</span>]&#125;</span> `</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nextWeek &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 剩余天数在本周范围内</span></span><br><span class="line">                preStr = <span class="string">`周<span class="subst">$&#123;dayList[itemWeekDay - <span class="number">1</span>]&#125;</span> `</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nextWeek &gt; <span class="number">0</span> &amp;&amp; nextWeek &lt;= <span class="number">7</span>) &#123;</span><br><span class="line">                <span class="comment">// 出了本周 但在下周范围内</span></span><br><span class="line">                preStr = <span class="string">`周<span class="subst">$&#123;dayList[nextWeek - <span class="number">1</span>]&#125;</span> `</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> preStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="getCommentTime-处理评论的发布时间"><a href="#getCommentTime-处理评论的发布时间" class="headerlink" title="getCommentTime 处理评论的发布时间"></a>getCommentTime 处理评论的发布时间</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>num 参数为时间戳，type参数为自定义时间格式，例如&quot;YYYY-mm-dd&quot;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return </span>&#x27;刚刚&#x27;、&#x27;X分钟前&#x27;、&#x27;X小时前&#x27;、&#x27;1天前&#x27;、&#x27;2天前&#x27;、自定义格式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCommentTime</span>(<span class="params">num, timeType = <span class="string">&quot;YYYY-MM-dd HH:mm:SS&quot;</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num) &#123;</span><br><span class="line">        num = <span class="built_in">parseInt</span>(num);</span><br><span class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        <span class="keyword">var</span> r = now.getTime() - num;</span><br><span class="line">        <span class="keyword">if</span> (r &lt; <span class="number">86400000</span>) &#123;</span><br><span class="line">            <span class="comment">//24小时内</span></span><br><span class="line">            <span class="keyword">var</span> h = <span class="built_in">Math</span>.floor(r / <span class="number">3600000</span>);</span><br><span class="line">            <span class="keyword">if</span> (h &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//超过1小时</span></span><br><span class="line">                <span class="keyword">return</span> h + <span class="string">&quot;小时前&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//1小时内</span></span><br><span class="line">                <span class="keyword">var</span> m = <span class="built_in">Math</span>.floor((r % <span class="number">86400000</span>) / <span class="number">60000</span>);</span><br><span class="line">                <span class="keyword">return</span> m &gt; <span class="number">0</span>? m + <span class="string">&quot;分钟前&quot;</span>:<span class="string">&quot;刚刚&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (r &lt;= <span class="number">172800000</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;1天前&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (r &lt;= <span class="number">259200000</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;2天前&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//超过24小时</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.getStringDate(num,timeType);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="dateChange-字符串格式相互转换"><a href="#dateChange-字符串格式相互转换" class="headerlink" title="dateChange 字符串格式相互转换"></a>dateChange 字符串格式相互转换</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>str </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>suffix + - * &quot;&quot; /</span></span><br><span class="line"><span class="comment">* 这个方法有点好玩，返回的结果，再调用一次，又可以还原</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return </span>dateChange(myDate,&#x27;-&#x27;)//&quot;2021-08-13&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dateChange</span>(<span class="params">str, suffix</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(str);</span><br><span class="line">    <span class="keyword">const</span> year = date.getFullYear();</span><br><span class="line">    <span class="keyword">const</span> month = date.getMonth() + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> day = date.getDate();</span><br><span class="line">    <span class="keyword">const</span> t1 = [year, month, day].map(<span class="built_in">this</span>.formatNumber).join(suffix);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;t1&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 两位数前面补0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatNumber</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> str = n.toString();</span><br><span class="line">    <span class="comment">// return str[1] ? str : `0$&#123;str&#125;`;</span></span><br><span class="line">    <span class="keyword">return</span> str.padStart(<span class="number">2</span>,<span class="string">&quot;0&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Number</span>.prototype.padStart = <span class="function"><span class="keyword">function</span>(<span class="params">...arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">String</span>.prototype.padStart.call(<span class="built_in">this</span>,...arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">yanrongdeng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2017/06/11/Time/">http://example.com/2017/06/11/Time/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">小燕子的窝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/js/">js</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2017/06/21/browser/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">浏览器兼容问题</div></div></a></div><div class="next-post pull-right"><a href="/2017/06/09/nginx/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">nginx 设置本机域名</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/08/31/es6/" title="ES6 学习记录"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-31</div><div class="title">ES6 学习记录</div></div></a></div><div><a href="/2016/11/11/javascript/" title="学习JavaScript的过程"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-11-11</div><div class="title">学习JavaScript的过程</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">yanrongdeng</div><div class="author-info__description">一个爱笑&开朗的妹纸</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://yanrongdeng.github.io/"><i class="fab fa-github"></i><span>个人主页</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%97%B6%E9%97%B4de%E6%96%B9%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">获取时间de方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E8%84%9A%E6%9C%AC%E5%BA%93%E6%96%B9%E6%B3%95%E5%88%97%E8%A1%A8"><span class="toc-number">2.</span> <span class="toc-text">日期时间脚本库方法列表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#isLeapYear-%E5%88%A4%E6%96%AD%E9%97%B0%E5%B9%B4"><span class="toc-number">2.1.</span> <span class="toc-text">isLeapYear 判断闰年</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Format-%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">2.2.</span> <span class="toc-text">Format 日期格式化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#format-%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96-yyyy-MM-dd-hh-mm-ss-S"><span class="toc-number">2.3.</span> <span class="toc-text">format 日期格式化(yyyy-MM-dd hh:mm:ss.S)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DateAdd-%E6%97%A5%E6%9C%9F%E8%AE%A1%E7%AE%97"><span class="toc-number">2.4.</span> <span class="toc-text">DateAdd 日期计算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DateDiff-%E6%AF%94%E8%BE%83%E6%97%A5%E6%9C%9F%E5%B7%AE"><span class="toc-number">2.5.</span> <span class="toc-text">DateDiff 比较日期差</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toString-%E6%97%A5%E6%9C%9F%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.6.</span> <span class="toc-text">toString 日期转字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toArray-%E6%97%A5%E6%9C%9F%E5%88%86%E5%89%B2%E4%B8%BA%E6%95%B0%E7%BB%84"><span class="toc-number">2.7.</span> <span class="toc-text">toArray 日期分割为数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DatePart-%E5%8F%96%E6%97%A5%E6%9C%9F%E7%9A%84%E9%83%A8%E5%88%86%E4%BF%A1%E6%81%AF"><span class="toc-number">2.8.</span> <span class="toc-text">DatePart 取日期的部分信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MaxDayOfDate-%E5%8F%96%E6%97%A5%E6%9C%9F%E6%89%80%E5%9C%A8%E6%9C%88%E7%9A%84%E6%9C%80%E5%A4%A7%E5%A4%A9%E6%95%B0"><span class="toc-number">2.9.</span> <span class="toc-text">MaxDayOfDate 取日期所在月的最大天数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WeekNumOfYear-%E5%88%A4%E6%96%AD%E6%97%A5%E6%9C%9F%E6%89%80%E5%9C%A8%E5%B9%B4%E7%9A%84%E7%AC%AC%E5%87%A0%E5%91%A8"><span class="toc-number">2.10.</span> <span class="toc-text">WeekNumOfYear 判断日期所在年的第几周</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IsValidDate-%E9%AA%8C%E8%AF%81%E6%97%A5%E6%9C%9F%E6%9C%89%E6%95%88%E6%80%A7"><span class="toc-number">3.</span> <span class="toc-text">IsValidDate 验证日期有效性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CheckDateTime-%E5%AE%8C%E6%95%B4%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E6%A3%80%E6%9F%A5"><span class="toc-number">4.</span> <span class="toc-text">CheckDateTime 完整日期时间检查</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#daysBetween-%E6%97%A5%E6%9C%9F%E5%A4%A9%E6%95%B0%E5%B7%AE"><span class="toc-number">5.</span> <span class="toc-text">daysBetween 日期天数差</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getStringDate-%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%97%A5%E6%9C%9F"><span class="toc-number">6.</span> <span class="toc-text">getStringDate 获取字符串日期</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getStringToTime-%E8%8E%B7%E5%8F%96%E4%B8%AD%E5%9B%BD%E6%A0%87%E5%87%86%E6%97%B6%E9%97%B4-%E6%97%A5%E6%9C%9F"><span class="toc-number">7.</span> <span class="toc-text">getStringToTime 获取中国标准时间(日期)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getTimeStamp-%E8%8E%B7%E5%8F%96%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">8.</span> <span class="toc-text">getTimeStamp 获取时间戳</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getDayWeek-%E8%8E%B7%E5%8F%96%E2%80%9C%E5%91%A8%E5%87%A0%E2%80%9D"><span class="toc-number">9.</span> <span class="toc-text">getDayWeek 获取“周几”</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getFormatSeconds-%E8%8E%B7%E5%8F%96%E6%97%B6%E3%80%81%E5%88%86%E3%80%81%E7%A7%92"><span class="toc-number">10.</span> <span class="toc-text">getFormatSeconds 获取时、分、秒</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getDay-%E8%8E%B7%E5%8F%96%E5%A4%A9%E6%95%B0"><span class="toc-number">11.</span> <span class="toc-text">getDay 获取天数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getDayDesc-%E8%8E%B7%E5%8F%96%E6%98%8E%E5%90%8E%E5%A4%A9-%E6%9C%AC%E5%91%A8%E4%B8%8B%E5%91%A8"><span class="toc-number">12.</span> <span class="toc-text">getDayDesc 获取明后天 本周下周</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getCommentTime-%E5%A4%84%E7%90%86%E8%AF%84%E8%AE%BA%E7%9A%84%E5%8F%91%E5%B8%83%E6%97%B6%E9%97%B4"><span class="toc-number">13.</span> <span class="toc-text">getCommentTime 处理评论的发布时间</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dateChange-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="toc-number">14.</span> <span class="toc-text">dateChange 字符串格式相互转换</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/09/18/%E9%9D%A2%E8%AF%95%E9%A2%98/" title="面试题"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试题"/></a><div class="content"><a class="title" href="/2021/09/18/%E9%9D%A2%E8%AF%95%E9%A2%98/" title="面试题">面试题</a><time datetime="2021-09-18T05:10:38.000Z" title="发表于 2021-09-18 13:10:38">2021-09-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/31/es6/" title="ES6 学习记录"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ES6 学习记录"/></a><div class="content"><a class="title" href="/2021/08/31/es6/" title="ES6 学习记录">ES6 学习记录</a><time datetime="2021-08-31T12:20:56.000Z" title="发表于 2021-08-31 20:20:56">2021-08-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/06/25/git/" title="git的学习笔记"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git的学习笔记"/></a><div class="content"><a class="title" href="/2021/06/25/git/" title="git的学习笔记">git的学习笔记</a><time datetime="2021-06-25T12:14:10.000Z" title="发表于 2021-06-25 20:14:10">2021-06-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/25/Vue/" title="vue基本知识掌握"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue基本知识掌握"/></a><div class="content"><a class="title" href="/2021/04/25/Vue/" title="vue基本知识掌握">vue基本知识掌握</a><time datetime="2021-04-25T12:08:57.000Z" title="发表于 2021-04-25 20:08:57">2021-04-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/03/28/webpack4/" title="webpack4 快速入门指南"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="webpack4 快速入门指南"/></a><div class="content"><a class="title" href="/2021/03/28/webpack4/" title="webpack4 快速入门指南">webpack4 快速入门指南</a><time datetime="2021-03-28T09:20:46.000Z" title="发表于 2021-03-28 17:20:46">2021-03-28</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By yanrongdeng</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>